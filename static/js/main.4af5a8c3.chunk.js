(this["webpackJsonptest-assignment-frontend"]=this["webpackJsonptest-assignment-frontend"]||[]).push([[0],{48:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(0),c=n.n(a),s=n(14),i=n.n(s),u=(n(48),n(49),n(2)),o=n(5),l=n(16),b=n(9),j=n.n(b),f=n(17),d=n(1),p=n(99),m=n(97),g=n(98),h=n(24),O=(n(51),n(7)),x=Object(O.b)({key:"valueState",default:""}),v=Object(O.b)({key:"photosState",default:[]}),k=Object(O.b)({key:"isGroupedState",default:!1}),N=n(10),y=n(19),_=n(39),w=n.n(_),S=function(){function e(){Object(N.a)(this,e)}return Object(y.a)(e,null,[{key:"getPhoto",value:function(){var e=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get(this.url,{params:{api_key:"gTJAO48YcpmrADUyo4opy4ES4g7iDBxx",tag:t}}).then((function(e){var n=e.data.data;return(null===n||void 0===n?void 0:n.image_url)?{error:0,description:"OK",payload:{image_url:n.image_url,tag:t}}:{error:1,description:"\u041f\u043e \u0442\u044d\u0433\u0443 '".concat(t,"' \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e")}})).catch((function(e){return{error:2,description:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 http \u043e\u0448\u0438\u0431\u043a\u0430"}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();S.url="https://api.giphy.com/v1/gifs/random";var T=n(40),C=n.n(T);function E(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="";n.length<e;)n+=Math.random().toString(36).substring(2);return t?n.substring(0,C()(1,e)):n.substring(0,e)}var F=/[^a-z,\s]/gi;function P(e){var t=e.className,n=Object(O.c)(x),c=Object(d.a)(n,2),s=c[0],i=c[1],b=Object(O.c)(v),N=Object(d.a)(b,2),y=N[0],_=N[1],w=Object(O.c)(k),T=Object(d.a)(w,2),C=T[0],P=T[1],B=Object(a.useState)([]),D=Object(d.a)(B,2),J=D[0],M=D[1],A=Object(a.useState)(!1),I=Object(d.a)(A,2),L=I[0],z=I[1],G=Object(a.useState)(0),K=Object(d.a)(G,2),U=K[0],Y=K[1];Object(a.useEffect)((function(){var e;return 0!==U&&(e=setTimeout(Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=E(10,!0).replace(F,""),H(),e.next=4,V(t,y);case 4:Y(U+1);case 5:case"end":return e.stop()}}),e)}))),5e3)),function(){e&&clearTimeout(e)}}),[U]);var q=Object(l.a)(J),H=function(){q=[],M(Object(l.a)(q))},Q=function(e){q.push(e),M(Object(l.a)(q))},R=function(e,t,n){_([].concat(Object(l.a)(n),[{elements:e.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{tag:e.tag})})),search:t,key:Math.random().toString()}]))},V=function(){var e=Object(f.a)(j.a.mark((function e(t,n){var r,a,c,s,i,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("delay"!==t){e.next=3;break}return Y(1),e.abrupt("return");case 3:r=t.split(",").filter((function(e){return!!e})),a=[],c=Object(u.a)(r),e.prev=6,c.s();case 8:if((s=c.n()).done){e.next=19;break}return i=s.value,e.next=12,S.getPhoto(i);case 12:if(0===(o=e.sent).error){e.next=16;break}return Q(o.description),e.abrupt("continue",17);case 16:a.push({image_url:o.payload.image_url,tag:i});case 17:e.next=8;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(6),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:if(a.length){e.next=29;break}return e.abrupt("return");case 29:R(a,t,n);case 30:case"end":return e.stop()}}),e,null,[[6,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(r.jsx)("div",{className:Object(h.a)(t),children:Object(r.jsxs)("div",{className:"search",children:[Object(r.jsxs)("div",{className:"d-flex justify-content-between search__buttons",children:[Object(r.jsx)("div",{children:Object(r.jsx)(p.a,{value:s,onChange:function(e){return t=(t=(t=e.target.value).replace(F,"")).replace(" ",""),void i(t);var t},className:"search__buttons-input",placeholder:"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u0433"})}),Object(r.jsx)(m.a,{className:"search__buttons-submit",onClick:function(){H(),function(e){return 0===e.length?(Q("\u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435 '\u0442\u0435\u0433'"),!1):(H(),!0)}(s)&&(z(!0),V(s,y).finally((function(){return z(!1)})))},disabled:L||0!==U,children:L||U?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"}),Object(r.jsx)(m.a,{className:"search__buttons-clear",onClick:function(){H(),i(""),_([]),Y(0)},children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"}),Object(r.jsx)(m.a,{onClick:function(){return P(!C)},className:"search__buttons-grouped",children:C?"\u0420\u0430\u0437\u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0413\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]}),Object(r.jsx)("div",{className:"alert-block",children:J.map((function(e,t){return Object(r.jsx)(g.a,{className:"mt-2 pointer",variant:"danger",dismissible:!0,onClick:function(){q=J.filter((function(t){return t!==e})),M(Object(l.a)(q))},children:e},t)}))})]})})}n(91);function B(e){var t=Object(O.e)(x),n=[];return e.groupedTag?n.push("d-flex flex-row border m-2 image-wrapper-grouped"):n.push("m-2 d-flex border container flex-column border image-wrapper"),Object(r.jsxs)("div",{className:e.groupedTag?"border p-2 m-2":"",children:[e.groupedTag&&Object(r.jsx)("h6",{className:"ml-2",children:e.groupedTag}),Object(r.jsx)("div",{className:Object(h.a)(n),children:e.images.map((function(n){return Object(r.jsx)("img",{height:200/e.images.length,alt:n.tag,src:n.url,onClick:function(){return t(n.tag)},className:"p-1 border image"},n.tag+n.url)}))})]})}n(92);function D(e){var t=Object(O.d)(v);return Object(r.jsx)("div",{className:e.className,children:Object(r.jsx)("div",{className:"d-flex flex-row flex-wrap justify-content-center row-cols-3 search-result",children:t.map((function(e){return Object(r.jsx)(B,{images:e.elements.map((function(e){return{url:e.image_url,tag:e.tag}}))},e.key)}))})})}n(93);function J(e){var t=Object(O.d)(v),n={};return t.forEach((function(e){e.elements.forEach((function(e){void 0===n[e.tag]&&(n[e.tag]=[]),n[e.tag].push({url:e.image_url,tag:e.tag})}))})),Object(r.jsx)("div",{className:e.className,children:Object(r.jsx)("div",{className:"d-flex flex-column flex-wrap justify-content-center search-result-grouped",children:Object.keys(n).map((function(e){return Object(r.jsx)(B,{groupedTag:e,images:n[e]},e)}))})})}function M(){var e=Object(O.d)(k);return Object(r.jsxs)("div",{className:"m-3 app",children:[Object(r.jsx)(P,{className:"d-flex justify-content-center"}),!e&&Object(r.jsx)(D,{className:"mt-3"}),e&&Object(r.jsx)(J,{className:"mt-3"})]})}var A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,100)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(O.a,{children:Object(r.jsx)(M,{})})}),document.getElementById("root")),A()}},[[94,1,2]]]);
//# sourceMappingURL=main.4af5a8c3.chunk.js.map